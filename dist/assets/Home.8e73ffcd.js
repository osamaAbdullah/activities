var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;import{d as i}from"./index.7ba860dc.js";import{p as c,m as o,o as r,c as d,a as n,t as p,n as m,q as u,k as x,b as y,F as g,s as v,r as h,d as f,u as b}from"./vendor.b7e9e33c.js";const w={name:"Balance",data:()=>({balance:0}),computed:{color(){return 0===this.balance?"":this.balance>0?"bg-green-300":this.balance<0?"bg-red-300":void 0}},mounted(){i.collection("transactions").where("userId","==",this.$store.getters.user.uid).onSnapshot((e=>{this.balance=0,e.forEach((e=>{"cashIn"===e.data().type?this.balance+=parseInt(e.data().amount):this.balance-=parseInt(e.data().amount)}))}))}},k=m();c("data-v-929cecc0");const _={class:"flex justify-end lg:container pr-3"};o();const C=k(((e,t,s,a,l,i)=>(r(),d("div",_,[n("div",{class:["w-1/6 px-5 py-5 shadow border-b border-gray-200 sm:rounded-lg my-6",i.color]},p(e.balance),3)]))));w.render=C,w.__scopeId="data-v-929cecc0";const I={props:{percentage:{type:Number,default:0,required:!0},color:{default:"blue"}}},j=m();c("data-v-20253e26");const A={class:"relative w-full bg-gray-200 rounded flex justify-start items-center"},$={class:"text-2xl flex justify-center absolute inset-x-1/2"};o();const P=j(((e,t,s,a,l,i)=>(r(),d("div",A,[n("div",$,[u(e.$slots,"default",{},void 0,!0)]),n("div",{style:`width: ${s.percentage}%`,class:`absolute top-0 h-16 rounded shim-${s.color}`},null,6)]))));I.render=P,I.__scopeId="data-v-20253e26";const O={name:"Home",components:{balance:w,progress_bar:I},data:()=>({activities:[],ca:"completed_activities",osama:!0}),methods:{markAsPending(e,t){confirm("Are you sure you didn't complete the activity yet?")&&(i.collection(this.ca).doc(this.completedActivity(e)).delete(),this.activities[t].completed=!1)},markAsCompleted(e,t){i.collection(this.ca).doc(this.completedActivity(e)).set({activityId:e,userId:this.$store.getters.user.uid,dateTime:new Date}),this.activities[t].completed=!0},completedActivity(e){return`${e}__${this.$store.getters.user.uid}__${x().format("YYYY_MM_DD")}`}},computed:{status(){return Math.round(100*this.ratio)||0},ratio(){return this.activities.filter((e=>e.completed)).length/this.activities.length}},mounted(){i.collection("user_activity").where("userId","==",this.$store.getters.user.uid).onSnapshot((e=>{this.activities=[],e.forEach((e=>{i.collection("activities").doc(e.data().activityId).onSnapshot((async e=>{if(!e.data().status)return!1;let c=await i.collection(this.ca).doc(this.completedActivity(e.id)).get();this.activities.unshift(((e,i)=>{for(var c in i||(i={}))s.call(i,c)&&l(e,c,i[c]);if(t)for(var c of t(i))a.call(i,c)&&l(e,c,i[c]);return e})({id:e.id,completed:void 0!==c.data()},e.data()))}))}))}))}},S=m();c("data-v-7feb12c6");const Y={class:"flex w-1/2 lg:w-2/3 sm:w-5/6 mx-auto shadow overflow-hidden border-b border-gray-200 sm:rounded-lg my-6"},D={class:"flex flex-col container mx-auto"},E={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},M={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},q={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},T={class:"min-w-full divide-y divide-gray-200"},U=n("thead",{class:"bg-gray-50"},[n("tr",null,[n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mulct "),n("th",{scope:"col",class:"relative px-6 py-3"},[n("span",{class:"sr-only"},"Edit")])])],-1),V={class:"bg-white divide-y divide-gray-200"},B={class:"px-6 py-4 whitespace-nowrap"},F={class:"flex items-center"},H={class:"ml-4"},N={class:"text-sm font-medium text-gray-900"},z={class:"px-6 py-4 whitespace-nowrap"},G={class:"text-sm text-gray-900"},J={class:"text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap"},L={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R={class:"px-6 font-medium"},W={class:"inline-flex items-center justify-center text-2xl"},X=n("span",{class:"ml-2 text-gray-700"},"Completed",-1),Z={id:"cards",class:"flex flex-col items-center"},ee={key:0,class:"py-2 px-3"},te=n("div",{class:"p-2 w-full bg-green-300 text-sm text-center text-green-500 rounded-full"},"Completed",-1),se=n("div",{class:"italic p-2 text-blue-500"},"click to unComplete",-1),ae={key:1,class:"py-2 px-3"},le=n("div",{class:"p-2 w-full bg-red-300 text-sm text-center text-red-500 rounded-full"},"Pending",-1),ie=n("div",{class:"italic p-2 text-blue-500"},"click to Complete",-1);o();const ce=S(((e,t,s,a,l,i)=>{const c=h("balance"),o=h("progress_bar");return r(),d(g,null,[n(c),n("div",Y,[n(o,{title:"Your progress",percentage:i.status},{default:S((()=>[y(p(i.status)+"% ",1)])),_:1},8,["percentage"])]),n("div",D,[n("div",E,[n("div",M,[n("div",q,[n("table",T,[U,n("tbody",V,[(r(!0),d(g,null,v(e.activities,((e,t)=>(r(),d("tr",{key:e.id},[n("td",B,[n("div",F,[n("div",H,[n("div",N,p(e.title),1)])])]),n("td",z,[n("div",G,p(e.description),1),n("div",J,p(e.type),1)]),n("td",K,[n("span",L,p(e.completed?"Completed":"Pending"),1)]),n("td",Q,p(e.mulct),1),n("td",R,[n("label",W,[f(n("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600",onChange:s=>e.completed?i.markAsCompleted(e.id,t):i.markAsPending(e.id,t),"onUpdate:modelValue":t=>e.completed=t},null,40,["onChange","onUpdate:modelValue"]),[[b,e.completed]]),X])])])))),128))])]),n("div",Z,[(r(!0),d(g,null,v(e.activities,((e,t)=>(r(),d("div",{key:e.id,onClick:s=>e.completed?i.markAsPending(e.id,t):i.markAsCompleted(e.id,t),class:"rounded-3xl flex flex-col justify-center items-center p-5 my-3 "+(e.completed?"bg-green-200":"bg-red-200")},[n("div",{textContent:p(e.title),class:"text-2xl text-white text-center p-1"},null,8,["textContent"]),n("div",{textContent:p(e.mulct),class:"text-white text-center p-1"},null,8,["textContent"]),e.completed?(r(),d("div",ee,[te,se])):(r(),d("div",ae,[le,ie]))],10,["onClick"])))),128))])])])])])],64)}));O.render=ce,O.__scopeId="data-v-7feb12c6";export default O;
