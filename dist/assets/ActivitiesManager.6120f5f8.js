var t=Object.defineProperty,e=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s,r=(t,e)=>{for(var i in e||(e={}))l.call(e,i)&&a(t,i,e[i]);if(s)for(var i of s(e))o.call(e,i)&&a(t,i,e[i]);return t};import{d}from"./index.988dbf47.js";import{o as c,c as n,a as m,F as p,s as f,t as u,e as y,d as x,x as g,y as v,g as b}from"./vendor.57260a3e.js";const h={name:"ActivityManager",data:()=>({form:{},activities:[]}),methods:{deleteActivities(t,e){d.collection(t).where("activityId","==",e).get().then((e=>{e.forEach((e=>{d.doc(`${t}/${e.id}`).delete().then().catch()}))}))},createActivity(){var t,s;d.collection("activities").add((t=r({},this.form.fields),s={createdAt:new Date},e(t,i(s)))).then((t=>{console.log("Document written with ID: ",t.id),this.form.visibility=!1})).catch((t=>{console.error("Error adding document: ",t)}))},editActivity(t,e){this.resetForm();let i=this.activities[e];this.form.title=`Update activity "${i.title}"`,this.form.activityId=i.id,this.form.fields.title=i.title,this.form.fields.description=i.description,this.form.fields.type=i.type,this.form.fields.mulct=i.mulct},deleteActivity(t,e){confirm("Are you sure you want to permanently delete this Activity, it will be also deleted from all pages")&&(d.collection("activities").doc(t).delete().then().catch(),this.deleteActivities("user_activity",t),this.deleteActivities("missed_activities",t),this.deleteActivities("completed_activities",t),this.activities.slice(e,1))},updateActivity(t){d.collection("activities").doc(t).update(this.form.fields).then((()=>this.form.visibility=!1)).catch()},resetForm(){this.form={fields:{title:"",description:"",type:"",mulct:""},errors:{},activityId:!1,visibility:!0,title:"Create new activity"}}},created(){d.collection("activities").onSnapshot((t=>{this.activities=[],t.forEach((t=>{console.log(t.data()),this.activities.unshift(r({id:t.id},t.data()))}))}))}},w=m("div",{class:"flex justify-center w-2/6 mx-auto shadow overflow-hidden border-b border-gray-200 sm:rounded-lg my-6"},[m("div",{class:"text-2xl px-10 py-10"},"Activities")],-1),k={class:"flex justify-end lg:container"},A={class:"flex flex-col container mx-auto"},_={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},j={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},D={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},O={class:"min-w-full divide-y divide-gray-200"},C=m("thead",{class:"bg-gray-50"},[m("tr",null,[m("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),m("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),m("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),m("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mulct "),m("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created At "),m("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Updated At "),m("th",{scope:"col",class:"relative px-6 py-3"},[m("span",{class:"sr-only"},"Edit")]),m("th",{scope:"col",class:"relative px-6 py-3"},[m("span",{class:"sr-only"},"Delete")])])],-1),I={class:"bg-white divide-y divide-gray-200"},E={class:"px-6 py-4 whitespace-nowrap"},T={class:"flex items-center"},U={class:"ml-4"},F={class:"text-sm font-medium text-gray-900"},P={class:"px-6 py-4 whitespace-nowrap"},q={class:"text-sm text-gray-900"},S={class:"px-6 py-4 whitespace-nowrap"},V={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},M={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},N={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$={class:"text-sm text-gray-900"},z={class:"text-sm text-gray-500"},B={key:0,class:"px-6 py-4 whitespace-nowrap"},G={class:"text-sm text-gray-900"},H={class:"text-sm text-gray-500"},J={key:1,class:"px-6 py-4 whitespace-nowrap"},K=m("div",{class:"text-sm text-gray-900"},"______",-1),L=m("div",{class:"text-sm text-gray-500"},"______",-1),Q={class:"px-6 font-medium"},R={class:"px-6 font-medium"},W={key:0,class:"fixed z-20 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},X={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Y=m("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1),Z={class:"inline-block align-bottom bg-white rounded-lg text-left bg-green-500 shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},tt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},et={class:"sm:flex sm:items-start"},it={class:"mt-3 w-full text-center sm:mt-0 sm:ml-4 sm:text-left"},st={class:"text-lg leading-6 font-medium text-gray-900"},lt={class:"mt-2"},ot={class:"shadow overflow-hidden sm:rounded-md"},at={class:"px-4 py-5 bg-white sm:p-6"},rt={class:"grid grid-cols-6 gap-6"},dt={class:"col-span-6 sm:col-span-4"},ct=m("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1),nt={class:"col-span-6 sm:col-span-4"},mt=m("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1),pt={class:"col-span-6 sm:col-span-3"},ft=m("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Type",-1),ut=m("option",{value:"daily"},"Daily",-1),yt={class:"col-span-6 sm:col-span-4"},xt=m("label",{for:"mulct",class:"block text-sm font-medium text-gray-700"},"Mulct",-1),gt=m("div",{class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},[m("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Save ")],-1);h.render=function(t,e,i,s,l,o){return c(),n(p,null,[w,m("div",k,[m("button",{onClick:e[1]||(e[1]=(...t)=>o.resetForm&&o.resetForm(...t)),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mb-3"}," New Activity ")]),m("div",A,[m("div",_,[m("div",j,[m("div",D,[m("table",O,[C,m("tbody",I,[(c(!0),n(p,null,f(t.activities,((e,i)=>(c(),n("tr",{key:e.id},[m("td",E,[m("div",T,[m("div",U,[m("div",F,u(e.title),1)])])]),m("td",P,[m("div",q,u(e.description),1)]),m("td",S,[m("span",V,u(e.type),1)]),m("td",M,u(e.mulct),1),m("td",N,[m("div",$,u(t.formatDateTime(e.createdAt)),1),m("div",z,u(t.fromNow(e.createdAt)),1)]),e.updatedAt?(c(),n("td",B,[m("div",G,u(t.formatDateTime(e.updatedAt)),1),m("div",H,u(t.fromNow(e.updatedAt)),1)])):(c(),n("td",J,[K,L])),m("td",Q,[m("button",{onClick:t=>o.editActivity(e.id,i),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full"},"Edit ",8,["onClick"])]),m("td",R,[m("button",{onClick:t=>o.deleteActivity(e.id,i),class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full"},"Delete ",8,["onClick"])])])))),128))])])])])])]),t.form.visibility?(c(),n("div",W,[m("div",X,[m("div",{onClick:e[2]||(e[2]=e=>t.form.visibility=!1),class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Y,m("div",Z,[m("div",tt,[m("div",et,[m("div",it,[m("h3",st,u(t.form.title),1),m("div",lt,[m("form",{onSubmit:e[7]||(e[7]=y((e=>t.form.activityId?o.updateActivity(t.form.activityId):o.createActivity()),["prevent"]))},[m("div",ot,[m("div",at,[m("div",rt,[m("div",dt,[ct,x(m("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.form.fields.title=e),id:"title",autocomplete:"title",required:"",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[g,t.form.fields.title]])]),m("div",nt,[mt,x(m("textarea",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.form.fields.description=e),id:"description",rows:"3",required:"",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Activity details..."},null,512),[[g,t.form.fields.description]])]),m("div",pt,[ft,x(m("select",{id:"type","onUpdate:modelValue":e[5]||(e[5]=e=>t.form.fields.type=e),required:"",autocomplete:"country",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[ut],512),[[v,t.form.fields.type]])]),m("div",yt,[xt,x(m("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.form.fields.mulct=e),type:"number",id:"mulct",autocomplete:"title",required:"",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[g,t.form.fields.mulct]])])])]),gt])],32)])])])])])])])):b("",!0)],64)};export default h;
