var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,d=(t,e)=>{for(var s in e||(e={}))a.call(e,s)&&o(t,s,e[s]);if(i)for(var s of i(e))l.call(e,s)&&o(t,s,e[s]);return t},n=(t,i)=>e(t,s(i));import{d as r}from"./index.cd906f01.js";import{o as c,c as m,a as p,F as u,s as x,t as y,g,e as f,d as h,x as b,y as v}from"./vendor.57260a3e.js";const w={name:"Users",data:()=>({users:[],transaction:{visibility:!1,userId:null,id:null,index:null},activity:{visibility:!1,userId:null,id:null,index:null},missedActivity:{visibility:!1,activityTitle:null},transactions:[],activities:[],missedActivities:[],form:{}}),methods:{showMissedTimes(t,e){this.missedActivities=[],r.collection("missed_activities").where("activityId","==",t).where("userId","==",this.activity.userId).orderBy("missedDay").get().then((t=>{t.forEach((t=>{this.missedActivities.push(t.data().missedDay)})),this.missedActivity={visibility:!0,activityTitle:e}}))},changeRole(t,e){r.collection("users").doc(this.users[e].id).update({role:t}).then().catch()},changeStatus(t,e){r.collection("users").doc(this.users[e].id).update({status:t}).then().catch()},seeTransactions(t){this.transaction={visibility:!0,userId:this.users[t].id,index:t},r.collection("transactions").where("userId","==",this.users[t].id).onSnapshot((e=>{this.transactions=[],e.forEach((e=>{this.transactions.unshift(n(d({id:e.id},e.data()),{user:this.users[t]}))}))}))},seeActivities(t){this.activity={visibility:!0,userId:this.users[t].id,index:t},r.collection("user_activity").where("userId","==",this.users[t].id).onSnapshot((e=>{this.activities=[],e.forEach((e=>{r.doc("activities/"+e.data().activityId).get().then((s=>this.activities.unshift(n(d({id:s.id},s.data()),{joinedAt:e.data().joinedAt,user:this.users[t]}))))}))}))},createTransactions(t){r.collection("transactions").add(n(d({},this.form.fields),{userId:t,createdAt:new Date})),this.form.visibility=!1},editTransaction(t,e){this.transaction.id=t,this.resetForm(),this.form.title="Update Transaction",this.form.mode="update",this.form.fields.amount=this.transactions[e].amount,this.form.fields.type=this.transactions[e].type},updateTransaction(){r.collection("transactions").doc(this.transaction.id).update(n(d({},this.form.fields),{updatedAt:new Date})).then((()=>this.form.visibility=!1)).catch((t=>console.error("Error removing document: ",t)))},deleteTransaction(t,e){confirm("Are you sure you want to permanently delete this transaction")&&(r.collection("transactions").doc(t).delete().then().catch(),this.transactions.slice(e,1))},resetForm(){this.form={fields:{amount:"",type:""},visibility:!0,title:"New transaction",mode:"create"}}},created(){r.collection("users").onSnapshot((t=>{this.users=[],t.forEach((t=>{this.users.unshift(d({id:t.id},t.data()))}))}))},computed:{balance(){let t=0;return this.transactions.map((e=>{"cashIn"===e.type?t+=parseInt(e.amount):t-=parseInt(e.amount)})),t}}},k=p("div",{class:"flex justify-center w-2/6 mx-auto shadow overflow-hidden border-b border-gray-200 sm:rounded-lg my-6"},[p("div",{class:"text-2xl px-10 py-10"},"Users")],-1),A={class:"flex flex-col container mx-auto"},T={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},C={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},j={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},I={class:"min-w-full divide-y divide-gray-200"},_=p("thead",{class:"bg-gray-50"},[p("tr",null,[p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),p("th",{scope:"col",class:"relative px-6 py-3"},[p("span",{class:"sr-only"},"Transactions")]),p("th",{scope:"col",class:"relative px-6 py-3"},[p("span",{class:"sr-only"},"Activities")])])],-1),U={class:"bg-white divide-y divide-gray-200"},D={class:"px-6 py-4 whitespace-nowrap"},O={class:"flex items-center"},E={class:"ml-4"},S={class:"text-sm font-medium text-gray-900"},N={class:"px-6 py-4 whitespace-nowrap"},P={class:"text-sm text-gray-900"},V={class:"px-6 py-4 whitespace-nowrap"},F=p("option",{value:"admin"},"Admin",-1),z=p("option",{value:"user"},"User",-1),M={class:"px-6 py-4 whitespace-nowrap"},R=p("option",{value:"active"},"Active",-1),q=p("option",{value:"blocked"},"Blocked",-1),B=p("option",{value:"pending"},"Pending",-1),J={class:"px-6 font-medium"},$={class:"px-6 font-medium"},G={key:0,class:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},H={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},K=p("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1),L={class:"inline-block align-bottom bg-white rounded-lg text-left bg-green-500 shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full"},Q={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},W={class:"sm:flex sm:items-start"},X={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Y={class:"flex justify-between"},Z={class:"text-lg leading-6 font-medium text-gray-900"},tt={class:"text-lg leading-6 font-medium text-gray-900"},et={class:"mt-2"},st={class:"flex flex-col w-full h-full"},it={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},at={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},lt={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},ot={class:"min-w-full divide-y divide-gray-200"},dt=p("thead",{class:"bg-gray-50"},[p("tr",null,[p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created At "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Updated At "),p("th",{scope:"col",class:"relative px-6 py-3"},[p("span",{class:"sr-only"},"Edit")]),p("th",{scope:"col",class:"relative px-6 py-3"},[p("span",{class:"sr-only"},"Delete")])])],-1),nt={class:"bg-white divide-y divide-gray-200"},rt={class:"px-6 py-4 whitespace-nowrap"},ct={class:"flex items-center"},mt={class:"ml-4"},pt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"text-sm text-gray-900"},xt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm text-gray-900"},gt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm text-gray-900"},ht={class:"text-sm text-gray-500"},bt={key:0,class:"px-6 py-4 whitespace-nowrap"},vt={class:"text-sm text-gray-900"},wt={class:"text-sm text-gray-500"},kt={key:1,class:"px-6 py-4 whitespace-nowrap"},At=p("div",{class:"text-sm text-gray-900"},"______",-1),Tt=p("div",{class:"text-sm text-gray-500"},"______",-1),Ct={class:"px-6 font-medium"},jt={class:"px-6 font-medium"},It={key:1,class:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},_t={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ut=p("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1),Dt={class:"inline-block align-bottom bg-white rounded-lg text-left bg-green-500 shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-2/3"},Ot={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Et={class:"sm:flex sm:items-start justify-center"},St={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Nt={class:"flex justify-between"},Pt={class:"text-lg leading-6 font-medium text-gray-900"},Vt={class:"mt-2"},Ft={class:"flex flex-col w-full h-full"},zt={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Mt={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},Rt={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},qt={class:"min-w-full divide-y divide-gray-200"},Bt=p("thead",{class:"bg-gray-50"},[p("tr",null,[p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Joined At "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mulct ")])],-1),Jt={class:"bg-white divide-y divide-gray-200"},$t={class:"px-6 py-4 whitespace-nowrap"},Gt={class:"flex items-center"},Ht={class:"ml-4"},Kt={class:"text-sm font-medium text-gray-900"},Lt={class:"px-6 py-4 whitespace-nowrap"},Qt={class:"text-sm text-gray-900"},Wt={class:"text-sm text-gray-500"},Xt={class:"px-6 py-4 whitespace-nowrap"},Yt={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ee={key:2,class:"fixed z-20 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},se={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ie=p("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1),ae={class:"inline-block align-bottom bg-white rounded-lg text-left bg-green-500 shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},le={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},oe={class:"sm:flex sm:items-start"},de={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ne={class:"text-lg leading-6 font-medium text-gray-900"},re={class:"mt-2"},ce={class:"mt-10 sm:mt-0"},me={class:"md:grid md:grid-cols-3 md:gap-6"},pe={class:"mt-5 md:mt-0 md:col-span-2"},ue={class:"shadow overflow-hidden sm:rounded-md"},xe={class:"px-4 py-5 bg-white sm:p-6"},ye={class:"grid grid-cols-6 gap-6"},ge={class:"col-span-6 sm:col-span-3"},fe=p("label",{for:"amount",class:"block text-sm font-medium text-gray-700"},"Amount",-1),he={class:"col-span-6 sm:col-span-3"},be=p("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Type",-1),ve=p("option",{value:"cashIn"},"Cash In",-1),we=p("option",{value:"cashOut"},"Cash Out",-1),ke=p("div",{class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},[p("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Save ")],-1),Ae={key:3,class:"fixed z-30 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Te={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ce=p("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1),je={class:"inline-block align-bottom bg-white rounded-lg text-left bg-green-500 shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:2/3"},Ie={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},_e={class:"sm:flex sm:items-center"},Ue={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},De={class:"text-lg leading-6 font-medium text-gray-900"},Oe={class:"mt-2"},Ee={class:"mt-10 sm:mt-0"},Se={class:"md:grid md:grid-cols-3 md:gap-6"};w.render=function(t,e,s,i,a,l){return c(),m(u,null,[k,p("div",A,[p("div",T,[p("div",C,[p("div",j,[p("table",I,[_,p("tbody",U,[(c(!0),m(u,null,x(t.users,((e,s)=>(c(),m("tr",{key:e.id},[p("td",D,[p("div",O,[p("div",E,[p("div",S,y(e.name),1)])])]),p("td",N,[p("div",P,y(e.email),1)]),p("td",V,[h(p("select",{"onUpdate:modelValue":e=>t.users[s].role=e,onChange:e=>l.changeRole(t.users[s].role,s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[F,z],40,["onUpdate:modelValue","onChange"]),[[v,t.users[s].role]])]),p("td",M,[h(p("select",{"onUpdate:modelValue":e=>t.users[s].status=e,onChange:e=>l.changeStatus(t.users[s].status,s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[R,q,B],40,["onUpdate:modelValue","onChange"]),[[v,t.users[s].status]])]),p("td",J,[p("button",{onClick:t=>l.seeTransactions(s),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full"},"see transactions ",8,["onClick"])]),p("td",$,[p("button",{onClick:t=>l.seeActivities(s),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full"},"see activities ",8,["onClick"])])])))),128))])])])])])]),t.transaction.visibility?(c(),m("div",G,[p("div",H,[p("div",{onClick:e[1]||(e[1]=e=>t.transaction.visibility=!1),class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),K,p("div",L,[p("div",Q,[p("div",W,[p("div",X,[p("div",Y,[p("h3",Z,y(t.users[t.transaction.index].name)+"'s Transactions ",1),p("h3",tt,y(l.balance)+"$ ",1),p("button",{onClick:e[2]||(e[2]=(...t)=>l.resetForm&&l.resetForm(...t)),class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," New Transaction ")]),p("div",et,[p("div",st,[p("div",it,[p("div",at,[p("div",lt,[p("table",ot,[dt,p("tbody",nt,[(c(!0),m(u,null,x(t.transactions,((e,s)=>(c(),m("tr",{key:e.id},[p("td",rt,[p("div",ct,[p("div",mt,[p("div",{class:"text-sm font-medium text-gray-900",title:e.user.email},y(e.user.name),9,["title"])])])]),p("td",pt,[p("div",ut,y(e.amount),1)]),p("td",xt,[p("div",yt,y(e.type),1)]),p("td",gt,[p("div",ft,y(t.formatDateTime(e.createdAt)),1),p("div",ht,y(t.fromNow(e.createdAt)),1)]),e.updatedAt?(c(),m("td",bt,[p("div",vt,y(t.formatDateTime(e.updatedAt)),1),p("div",wt,y(t.fromNow(e.updatedAt)),1)])):(c(),m("td",kt,[At,Tt])),p("td",Ct,[p("button",{onClick:t=>l.editTransaction(e.id,s),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full"}," Edit ",8,["onClick"])]),p("td",jt,[p("button",{onClick:t=>l.deleteTransaction(e.id,s),class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full"}," Delete ",8,["onClick"])])])))),128))])])])])])])])])])])])])])):g("",!0),t.activity.visibility?(c(),m("div",It,[p("div",_t,[p("div",{onClick:e[3]||(e[3]=e=>t.activity.visibility=!1),class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Ut,p("div",Dt,[p("div",Ot,[p("div",Et,[p("div",St,[p("div",Nt,[p("h3",Pt,y(t.users[t.activity.index].name)+"'s Activities ",1)]),p("div",Vt,[p("div",Ft,[p("div",zt,[p("div",Mt,[p("div",Rt,[p("table",qt,[Bt,p("tbody",Jt,[(c(!0),m(u,null,x(t.activities,((e,s)=>(c(),m("tr",{key:e.id},[p("td",$t,[p("div",Gt,[p("div",Ht,[p("div",Kt,y(e.title),1)])])]),p("td",Lt,[p("div",Qt,y(e.description),1),p("div",Wt,y(e.type),1)]),p("td",Xt,[p("span",Yt,y(t.fromNow(e.joinedAt)),1)]),p("td",Zt,y(e.mulct),1),p("td",te,[p("button",{onClick:t=>l.showMissedTimes(e.id,e.title),class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full"}," Missed times ",8,["onClick"])])])))),128))])])])])])])])])])])])])])):g("",!0),t.form.visibility?(c(),m("div",ee,[p("div",se,[p("div",{onClick:e[4]||(e[4]=e=>t.form.visibility=!1),class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),ie,p("div",ae,[p("div",le,[p("div",oe,[p("div",de,[p("h3",ne,y(t.form.title),1),p("div",re,[p("div",ce,[p("div",me,[p("div",pe,[p("form",{onSubmit:e[7]||(e[7]=f((e=>"create"===t.form.mode?l.createTransactions(t.transaction.userId):l.updateTransaction()),["prevent"]))},[p("div",ue,[p("div",xe,[p("div",ye,[p("div",ge,[fe,h(p("input",{"onUpdate:modelValue":e[5]||(e[5]=e=>t.form.fields.amount=e),type:"number",id:"amount",required:"",autocomplete:"given-name",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[b,t.form.fields.amount]])]),p("div",he,[be,h(p("select",{id:"type","onUpdate:modelValue":e[6]||(e[6]=e=>t.form.fields.type=e),required:"",autocomplete:"country",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[ve,we],512),[[v,t.form.fields.type]])])])]),ke])],32)])])])])])])])])])])):g("",!0),t.missedActivity.visibility?(c(),m("div",Ae,[p("div",Te,[p("div",{onClick:e[8]||(e[8]=e=>t.missedActivity.visibility=!1),class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Ce,p("div",je,[p("div",Ie,[p("div",_e,[p("div",Ue,[p("h3",De,' missed Days for "'+y(t.missedActivity.activityTitle)+'" ',1),p("div",Oe,[p("div",Ee,[p("div",Se,[p("ul",null,[(c(!0),m(u,null,x(t.missedActivities,(t=>(c(),m("li",{key:t,class:"p-1 bg-gray-200 w-full"},y(t),1)))),128))])])])])])])])])])])):g("",!0)],64)};export default w;
