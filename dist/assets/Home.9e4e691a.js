var t=Object.defineProperty,e=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(e,s,a)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a;import{d as i}from"./index.b98b0492.js";import{q as c,s as n,o as r,c as o,a as d,t as x,u as p,x as u,k as m,b as g,F as y,m as v,r as f,d as h,y as b}from"./vendor.a9f341af.js";const w={name:"Balance",data:()=>({balance:0}),computed:{color(){return 0===this.balance?"":this.balance>0?"bg-green-300":this.balance<0?"bg-red-300":void 0}},mounted(){i.collection("transactions").where("userId","==",this.$store.getters.user.uid).onSnapshot((t=>{this.balance=0,t.forEach((t=>{"cashIn"===t.data().type?this.balance+=parseInt(t.data().amount):this.balance-=parseInt(t.data().amount)}))}))}},k=p();c("data-v-929cecc0");const C={class:"flex justify-end lg:container pr-3"};n();const _=k(((t,e,s,a,l,i)=>(r(),o("div",C,[d("div",{class:["w-1/6 px-5 py-5 shadow border-b border-gray-200 sm:rounded-lg my-6",i.color]},x(t.balance),3)]))));w.render=_,w.__scopeId="data-v-929cecc0";const j={props:{percentage:{type:Number,default:0,required:!0},color:{default:"blue"}}},I=p();c("data-v-20253e26");const A={class:"relative w-full bg-gray-200 rounded flex justify-start items-center"},P={class:"text-2xl flex justify-center absolute inset-x-1/2"};n();const $=I(((t,e,s,a,l,i)=>(r(),o("div",A,[d("div",P,[u(t.$slots,"default",{},void 0,!0)]),d("div",{style:`width: ${s.percentage}%`,class:`absolute top-0 h-16 rounded shim-${s.color}`},null,6)]))));j.render=$,j.__scopeId="data-v-20253e26";const O={name:"Home",components:{balance:w,progress_bar:j},data:()=>({activities:[],ca:"completed_activities",osama:!0}),methods:{markAsPending(t,e){confirm("Are you sure you didn't complete the activity yet?")&&(this.activities[e].loading=!0,i.collection(this.ca).doc(this.completedActivity(t)).delete().then((t=>{this.activities[e].completed=!1,this.activities[e].loading=!1})))},markAsCompleted(t,e){this.activities[e].loading=!0,i.collection(this.ca).doc(this.completedActivity(t)).set({activityId:t,userId:this.$store.getters.user.uid,dateTime:new Date}).then((t=>{this.activities[e].loading=!1,this.activities[e].completed=!0}))},completedActivity(t){return`${t}__${this.$store.getters.user.uid}__${m().format("YYYY_MM_DD")}`}},computed:{status(){return Math.round(100*this.ratio)||0},ratio(){return this.activities.filter((t=>t.completed)).length/this.activities.length}},mounted(){i.collection("user_activity").where("userId","==",this.$store.getters.user.uid).onSnapshot((t=>{this.activities=[],t.forEach((t=>{i.collection("activities").doc(t.data().activityId).onSnapshot((async t=>{if(!t.data().status)return!1;let c=await i.collection(this.ca).doc(this.completedActivity(t.id)).get();this.activities.unshift(((t,i)=>{for(var c in i||(i={}))s.call(i,c)&&l(t,c,i[c]);if(e)for(var c of e(i))a.call(i,c)&&l(t,c,i[c]);return t})({id:t.id,completed:void 0!==c.data(),loading:!1},t.data()))}))}))}))}},S=p();c("data-v-32d16012");const Y={class:"flex w-1/2 lg:w-2/3 sm:w-5/6 mx-auto shadow overflow-hidden border-b border-gray-200 sm:rounded-lg my-6"},D={class:"flex flex-col container mx-auto"},E={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},M={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},q={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},T={class:"min-w-full divide-y divide-gray-200"},U=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),d("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),d("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),d("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mulct "),d("th",{scope:"col",class:"relative px-6 py-3"},[d("span",{class:"sr-only"},"Edit")])])],-1),V={class:"bg-white divide-y divide-gray-200"},B={class:"px-6 py-4 whitespace-nowrap"},F={class:"flex items-center"},H={class:"ml-4"},N={class:"text-sm font-medium text-gray-900"},z={class:"px-6 py-4 whitespace-nowrap"},G={class:"text-sm text-gray-900"},J={class:"text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap"},L={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R={class:"px-6 font-medium"},W={class:"inline-flex items-center justify-center text-2xl"},X=d("span",{class:"ml-2 text-gray-700"},"Completed",-1),Z={id:"cards",class:"flex flex-col items-center select-none"},tt={key:0,class:"rounded-3xl flex flex-col justify-center items-center p-5 my-3 bg-gray-200 w-1/2"},et=d("div",null,[d("div",{class:"py-2 px-4 w-full bg-gray-300 text-sm text-center text-gray-400 rounded-full"},"Processing..."),d("div",{class:"italic p-2 text-gray-400 text-xs text-center"},"Please wait...")],-1),st=d("div",null,[d("div",{class:"p-2 w-full bg-green-300 text-sm text-center text-green-600 rounded-full"},"Completed"),d("div",{class:"italic p-2 text-green-500 text-xs text-center"},"click to toggle")],-1),at=d("div",null,[d("div",{class:"p-2 w-full bg-red-300 text-sm text-center text-red-600 rounded-full"},"Pending"),d("div",{class:"italic p-2 text-red-500 text-xs text-center"},"click to toggle")],-1);n();const lt=S(((t,e,s,a,l,i)=>{const c=f("balance"),n=f("progress_bar");return r(),o(y,null,[d(c),d("div",Y,[d(n,{title:"Your progress",percentage:i.status},{default:S((()=>[g(x(i.status)+"% ",1)])),_:1},8,["percentage"])]),d("div",D,[d("div",E,[d("div",M,[d("div",q,[d("table",T,[U,d("tbody",V,[(r(!0),o(y,null,v(t.activities,((t,e)=>(r(),o("tr",{key:t.id},[d("td",B,[d("div",F,[d("div",H,[d("div",N,x(t.title),1)])])]),d("td",z,[d("div",G,x(t.description),1),d("div",J,x(t.type),1)]),d("td",K,[d("span",L,x(t.completed?"Completed":"Pending"),1)]),d("td",Q,x(t.mulct),1),d("td",R,[d("label",W,[h(d("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600",onChange:s=>t.completed?i.markAsCompleted(t.id,e):i.markAsPending(t.id,e),"onUpdate:modelValue":e=>t.completed=e},null,40,["onChange","onUpdate:modelValue"]),[[b,t.completed]]),X])])])))),128))])]),d("div",Z,[(r(!0),o(y,null,v(t.activities,((t,e)=>(r(),o(y,{key:t.id},[t.loading?(r(),o("div",tt,[d("div",{textContent:x(t.title),class:"text-2xl text-gray-400 text-center p-1"},null,8,["textContent"]),d("div",{textContent:x(t.mulct),class:"text-gray-400 text-center p-1"},null,8,["textContent"]),et])):(r(),o(y,{key:1},[t.completed?(r(),o("div",{key:0,onClick:s=>i.markAsPending(t.id,e),class:"rounded-3xl flex flex-col justify-center items-center p-5 my-3 bg-green-200 w-1/2"},[d("div",{textContent:x(t.title),class:"text-2xl text-green-700 text-center p-1"},null,8,["textContent"]),d("div",{textContent:x(t.mulct),class:"text-green-700 text-center p-1"},null,8,["textContent"]),st],8,["onClick"])):(r(),o("div",{key:1,onClick:s=>i.markAsCompleted(t.id,e),class:"rounded-3xl flex flex-col justify-center items-center p-5 my-3 bg-red-200 w-1/2"},[d("div",{textContent:x(t.title),class:"text-2xl text-red-700 text-center p-1"},null,8,["textContent"]),d("div",{textContent:x(t.mulct),class:"text-red-700 text-center p-1"},null,8,["textContent"]),at],8,["onClick"]))],64))],64)))),128))])])])])])],64)}));O.render=lt,O.__scopeId="data-v-32d16012";export default O;
