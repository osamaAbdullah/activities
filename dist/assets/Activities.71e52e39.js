var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,c=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&r(t,s,e[s]);if(i)for(var s of i(e))a.call(e,s)&&r(t,s,e[s]);return t},l=(t,i)=>e(t,s(i));import{d}from"./index.690d380e.js";import{k as n,o as p,c as u,a as x,F as y,s as m,t as v}from"./vendor.57260a3e.js";const g={name:"Activities",data:()=>({activities:[]}),methods:{joinActivity(t,e){d.collection("user_activity").doc(this.$store.getters.user.uid+"_"+t).set({joinedAt:new Date,userId:this.$store.getters.user.uid,lastCheck:new Date,activityId:t}).then((()=>{this.activities[e].joined=!0,this.activities[e].status="joined "+n(new Date,"DD-MM-YYYY hh:mm:ss").fromNow()})).catch((t=>{console.error("Error adding document: ",t)}))},leaveActivity(t,e){d.collection("user_activity").doc(this.$store.getters.user.uid+"_"+t).delete().then((()=>{this.activities[e].joined=!1,this.activities[e].status="not joined",console.log("Document successfully deleted!")})).catch((t=>{console.error("Error removing document: ",t)}))}},created(){d.collection("activities").onSnapshot((t=>{t.forEach((async t=>{let e=await d.collection("user_activity").doc(this.$store.getters.user.uid+"_"+t.id).get();console.log(e.data()),void 0===e.data()?this.activities.unshift(l(c({id:t.id},t.data()),{joined:!1,status:"not joined"})):this.activities.unshift(l(c({id:t.id},t.data()),{joined:!0,status:"joined "+n(e.data().joinedAt.toDate(),"DD-MM-YYYY hh:mm:ss").fromNow()}))}))}))}},f=x("div",{class:"flex justify-center w-2/6 mx-auto shadow overflow-hidden border-b border-gray-200 sm:rounded-lg my-6"},[x("div",{class:"text-2xl px-10 py-10"},"All activities")],-1),h={class:"flex flex-col container mx-auto"},w={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},b={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},j={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},k={class:"min-w-full divide-y divide-gray-200"},D=x("thead",{class:"bg-gray-50"},[x("tr",null,[x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mulct "),x("th",{scope:"col",class:"relative px-6 py-3"},[x("span",{class:"sr-only"},"Join")])])],-1),O={class:"bg-white divide-y divide-gray-200"},A={class:"px-6 py-4 whitespace-nowrap"},Y={class:"flex items-center"},_={class:"ml-4"},C={class:"text-sm font-medium text-gray-900"},M={class:"px-6 py-4 whitespace-nowrap"},P={class:"text-sm text-gray-900"},E={class:"text-sm text-gray-500"},$={class:"px-6 py-4 whitespace-nowrap"},I={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},S={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J={class:"px-6 font-medium"};g.render=function(t,e,s,i,o,a){return p(),u(y,null,[f,x("div",h,[x("div",w,[x("div",b,[x("div",j,[x("table",k,[D,x("tbody",O,[(p(!0),u(y,null,m(t.activities,((t,e)=>(p(),u("tr",{key:t.id},[x("td",A,[x("div",Y,[x("div",_,[x("div",C,v(t.title),1)])])]),x("td",M,[x("div",P,v(t.description),1),x("div",E,v(t.type),1)]),x("td",$,[x("span",I,v(t.status),1)]),x("td",S,v(t.mulct),1),x("td",J,[t.joined?(p(),u("button",{key:0,onClick:s=>a.leaveActivity(t.id,e),class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full"},"Leave ",8,["onClick"])):(p(),u("button",{key:1,onClick:s=>a.joinActivity(t.id,e),class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full"},"Join ",8,["onClick"]))])])))),128))])])])])])])],64)};export default g;
