import{f as e,o as t,c as o,t as i,a as s}from"./vendor.b7e9e33c.js";import{d as n,v as r}from"./index.380c3bc2.js";const a={name:"Settings",data:()=>({token:"",isTokenRegistered:!0,errorMsg:!1}),methods:{async checkToken(){let e=await n.collection("notification_tokens").doc(this.token).get();this.isTokenRegistered=e.exists},enableNotifications(){n.collection("notification_tokens").doc(this.token).set({userId:this.$store.getters.user.uid,addedAt:new Date,username:this.$store.getters.user.name}).then((e=>this.isTokenRegistered=!0))},disableNotifications(){n.collection("notification_tokens").doc(this.token).delete().then((e=>this.isTokenRegistered=!1))}},created(){if(e.messaging.isSupported()){e.messaging().getToken(r).then((e=>{e?(this.token=e,this.checkToken()):console.log("No registration token available. Request permission to generate one.")})).catch((e=>{console.log("An error occurred while retrieving token. ",e)}))}else this.errorMsg="Notification not supported by your device"}},d={class:"flex flex-col justify-center w-2/6 mx-auto shadow overflow-hidden border-b border-gray-200 sm:rounded-lg my-6"},c=s("div",{class:"text-2xl px-10 py-10"},"Notifications",-1),l={key:1},g={key:0},f=s("p",null,"Notifications are enabled on this device",-1),h={key:1},k=s("p",null,"Notifications are disabled on this device",-1);a.render=function(e,n,r,a,b,u){return t(),o("div",d,[c,e.errorMsg?(t(),o("div",{key:0,textContent:i(e.errorMsg),class:""},null,8,["textContent"])):(t(),o("div",l,[e.isTokenRegistered?(t(),o("div",g,[f,s("button",{onClick:n[1]||(n[1]=(...e)=>u.disableNotifications&&u.disableNotifications(...e)),class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full"}," Disable Notifications ")])):(t(),o("div",h,[k,s("button",{onClick:n[2]||(n[2]=(...e)=>u.enableNotifications&&u.enableNotifications(...e)),class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full"}," Enable Notifications ")]))]))])};export default a;
