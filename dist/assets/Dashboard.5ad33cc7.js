var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(e,s,a)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,r=(t,e)=>{for(var s in e||(e={}))i.call(e,s)&&n(t,s,e[s]);if(a)for(var s of a(e))o.call(e,s)&&n(t,s,e[s]);return t},l=(t,a)=>e(t,s(a));import{d}from"./index.b98b0492.js";import{o as c,c as m,a as p,t as u,F as f,m as x,e as g,d as y,n as b,p as h,g as v}from"./vendor.a9f341af.js";const w={name:"Dashboard",data:()=>({transactions:[],form:{},budget:0,baseBudget:0,transaction:{}}),methods:{createTransactions(){d.collection("system_transactions").add(l(r({},this.form.fields),{createdAt:new Date})),this.form.visibility=!1},editTransaction(t,e){this.transaction.id=t,this.resetForm(),this.form.title="Update Transaction",this.form.mode="update",this.form.fields.amount=this.transactions[e].amount,this.form.fields.type=this.transactions[e].type},updateTransaction(){d.collection("system_transactions").doc(this.transaction.id).update(l(r({},this.form.fields),{updatedAt:new Date})).then((()=>this.form.visibility=!1)).catch((t=>console.error("Error removing document: ",t)))},deleteTransaction(t,e){confirm("Are you sure you want to permanently delete this transaction")&&(d.collection("system_transactions").doc(t).delete().then().catch(),this.transactions.slice(e,1))},resetForm(){this.form={fields:{amount:"",type:""},visibility:!0,title:"New transaction",mode:"create"}}},created(){d.collection("transactions").where("type","==","cashIn").onSnapshot((t=>{t.forEach((t=>{this.baseBudget+=parseInt(t.data().amount)}))})),d.collection("system_transactions").onSnapshot((t=>{this.transactions=[],this.budget=this.baseBudget,t.forEach((t=>{this.transactions.unshift(r({id:t.id},t.data())),"cashOut"===t.data().type?this.budget-=parseInt(t.data().amount):"cashIn"===t.data().type&&(this.budget+=parseInt(t.data().amount))}))}))}},k=p("div",{class:"flex justify-center w-2/6 mx-auto shadow overflow-hidden border-b border-gray-200 sm:rounded-lg my-6"},[p("div",{class:"text-2xl px-10 py-10"},"Admin Panel")],-1),_={class:"flex flex-col container mx-auto"},T={class:"inline-block shadow-xl w-full"},j={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},A={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},O={class:"flex justify-between"},C=p("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Systems's Transactions ",-1),D={class:"text-lg leading-6 font-medium text-gray-900"},I={class:"mt-2"},S={class:"flex flex-col w-full h-full"},E={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},F={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},P={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},U={class:"min-w-full divide-y divide-gray-200"},N=p("thead",{class:"bg-gray-50"},[p("tr",null,[p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created At "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Updated At "),p("th",{scope:"col",class:"relative px-6 py-3"},[p("span",{class:"sr-only"},"Edit")]),p("th",{scope:"col",class:"relative px-6 py-3"},[p("span",{class:"sr-only"},"Delete")])])],-1),B={class:"bg-white divide-y divide-gray-200"},q={class:"px-6 py-4 whitespace-nowrap"},V={class:"text-sm text-gray-900"},z={class:"px-6 py-4 whitespace-nowrap"},L={class:"text-sm text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap"},H={class:"text-sm text-gray-900"},J={class:"text-sm text-gray-500"},K={key:0,class:"px-6 py-4 whitespace-nowrap"},M={class:"text-sm text-gray-900"},Q={class:"text-sm text-gray-500"},R={key:1,class:"px-6 py-4 whitespace-nowrap"},W=p("div",{class:"text-sm text-gray-900"},"______",-1),X=p("div",{class:"text-sm text-gray-500"},"______",-1),Y={class:"px-6 font-medium"},Z={class:"px-6 font-medium"},$={key:0,class:"fixed z-20 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},tt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},et=p("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1),st={class:"inline-block align-bottom bg-white rounded-lg text-left bg-green-500 shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},at={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},it={class:"justify-center"},ot={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},nt={class:"text-lg leading-6 font-medium text-gray-900"},rt={class:"mt-2"},lt={class:"mt-10 sm:mt-0"},dt={class:"mt-5 md:mt-0 md:col-span-2"},ct={class:"shadow overflow-hidden sm:rounded-md"},mt={class:"px-4 py-5 bg-white sm:p-6"},pt={class:"grid grid-cols-6 gap-6"},ut={class:"col-span-6 sm:col-span-3"},ft=p("label",{for:"amount",class:"block text-sm font-medium text-gray-700"},"Amount",-1),xt={class:"col-span-6 sm:col-span-3"},gt=p("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Type",-1),yt=p("option",{value:"cashIn"},"Cash In",-1),bt=p("option",{value:"cashOut"},"Cash Out",-1),ht=p("div",{class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},[p("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Save ")],-1);w.render=function(t,e,s,a,i,o){return c(),m(f,null,[k,p("div",_,[p("div",T,[p("div",j,[p("div",null,[p("div",A,[p("div",O,[C,p("h3",D,u(t.budget.toLocaleString("en-US",{minimumFractionDigits:0})),1),p("button",{onClick:e[1]||(e[1]=(...t)=>o.resetForm&&o.resetForm(...t)),class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," New Transaction ")]),p("div",I,[p("div",S,[p("div",E,[p("div",F,[p("div",P,[p("table",U,[N,p("tbody",B,[(c(!0),m(f,null,x(t.transactions,((e,s)=>(c(),m("tr",{key:e.id},[p("td",q,[p("div",V,u(e.amount),1)]),p("td",z,[p("div",L,u(e.type),1)]),p("td",G,[p("div",H,u(t.formatDateTime(e.createdAt)),1),p("div",J,u(t.fromNow(e.createdAt)),1)]),e.updatedAt?(c(),m("td",K,[p("div",M,u(t.formatDateTime(e.updatedAt)),1),p("div",Q,u(t.fromNow(e.updatedAt)),1)])):(c(),m("td",R,[W,X])),p("td",Y,[p("button",{onClick:t=>o.editTransaction(e.id,s),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full"}," Edit ",8,["onClick"])]),p("td",Z,[p("button",{onClick:t=>o.deleteTransaction(e.id,s),class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full"}," Delete ",8,["onClick"])])])))),128))])])])])])])])])])])])]),t.form.visibility?(c(),m("div",$,[p("div",tt,[p("div",{onClick:e[2]||(e[2]=e=>t.form.visibility=!1),class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),et,p("div",st,[p("div",at,[p("div",it,[p("div",ot,[p("h3",nt,u(t.form.title),1),p("div",rt,[p("div",lt,[p("div",null,[p("div",dt,[p("form",{onSubmit:e[5]||(e[5]=g((e=>"create"===t.form.mode?o.createTransactions():o.updateTransaction()),["prevent"]))},[p("div",ct,[p("div",mt,[p("div",pt,[p("div",ut,[ft,y(p("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.form.fields.amount=e),type:"number",id:"amount",required:"",autocomplete:"given-name",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[b,t.form.fields.amount]])]),p("div",xt,[gt,y(p("select",{id:"type","onUpdate:modelValue":e[4]||(e[4]=e=>t.form.fields.type=e),required:"",autocomplete:"country",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[yt,bt],512),[[h,t.form.fields.type]])])])]),ht])],32)])])])])])])])])])])):v("",!0)],64)};export default w;
